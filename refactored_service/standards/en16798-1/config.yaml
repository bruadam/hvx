id: "en16798-1"
name: "EN 16798-1 Indoor Environmental Input Parameters"
version: "2024.1"
standard_type: "EN16798"
description: "Energy performance of buildings - Ventilation for buildings - Indoor environmental input parameters for design and assessment of energy performance of buildings"

# Category-based standard with 4 levels
category_based: true
categories:
  - id: "I"
    name: "Category I - High level of expectation"
    description: "For spaces occupied by very sensitive and fragile persons with special requirements"
  - id: "II"
    name: "Category II - Normal level of expectation"
    description: "For new buildings and renovations"
  - id: "III"
    name: "Category III - Moderate level of expectation"
    description: "For existing buildings"
  - id: "IV"
    name: "Category IV - Low level of expectation"
    description: "Below Category III"

# Applicability conditions
applicability:
  countries: ["EU", "DK", "DE", "FR", "NL", "SE", "NO"]
  regions: ["Europe", "Nordic"]
  building_types: ["office", "school", "classroom", "meeting_room", "residential"]
  ventilation_types: ["natural", "mechanical", "mixed"]
  seasons: ["all_year", "winter", "summer"]

# Required environmental parameters
required_inputs:
  temperature: true
  co2: false  # Optional but recommended
  humidity: false  # Optional
  outdoor_temperature: false  # For adaptive comfort

# Rules for each category
rulesets:
  # Category I - High expectation
  - category: "I"
    rules:
      - id: "temp_heating_cat1"
        name: "Temperature Heating Season Cat I"
        metric: "temperature"
        operator: "between"
        lower_bound: 21.0
        upper_bound: 23.0
        unit: "°C"
        tolerance_hours: 100
        applies_during: "occupied"
        season: "winter"

      - id: "temp_cooling_cat1"
        name: "Temperature Cooling Season Cat I"
        metric: "temperature"
        operator: "between"
        lower_bound: 23.5
        upper_bound: 25.5
        unit: "°C"
        tolerance_hours: 100
        applies_during: "occupied"
        season: "summer"

      - id: "co2_cat1"
        name: "CO2 Concentration Cat I"
        metric: "co2"
        operator: "<="
        target_value: 950  # 400 + 550
        unit: "ppm"
        tolerance_percentage: 5
        applies_during: "occupied"

      - id: "humidity_cat1"
        name: "Relative Humidity Cat I"
        metric: "humidity"
        operator: "between"
        lower_bound: 30
        upper_bound: 50
        unit: "%"
        tolerance_percentage: 10
        applies_during: "occupied"

  # Category II - Normal expectation
  - category: "II"
    rules:
      - id: "temp_heating_cat2"
        name: "Temperature Heating Season Cat II"
        metric: "temperature"
        operator: "between"
        lower_bound: 20.0
        upper_bound: 24.0
        unit: "°C"
        tolerance_hours: 100
        applies_during: "occupied"
        season: "winter"

      - id: "temp_cooling_cat2"
        name: "Temperature Cooling Season Cat II"
        metric: "temperature"
        operator: "between"
        lower_bound: 23.0
        upper_bound: 26.0
        unit: "°C"
        tolerance_hours: 100
        applies_during: "occupied"
        season: "summer"

      - id: "co2_cat2"
        name: "CO2 Concentration Cat II"
        metric: "co2"
        operator: "<="
        target_value: 1200  # 400 + 800
        unit: "ppm"
        tolerance_percentage: 5
        applies_during: "occupied"

      - id: "humidity_cat2"
        name: "Relative Humidity Cat II"
        metric: "humidity"
        operator: "between"
        lower_bound: 25
        upper_bound: 60
        unit: "%"
        tolerance_percentage: 10
        applies_during: "occupied"

  # Category III - Moderate expectation
  - category: "III"
    rules:
      - id: "temp_heating_cat3"
        name: "Temperature Heating Season Cat III"
        metric: "temperature"
        operator: "between"
        lower_bound: 19.0
        upper_bound: 25.0
        unit: "°C"
        tolerance_hours: 150
        applies_during: "occupied"
        season: "winter"

      - id: "temp_cooling_cat3"
        name: "Temperature Cooling Season Cat III"
        metric: "temperature"
        operator: "between"
        lower_bound: 22.0
        upper_bound: 27.0
        unit: "°C"
        tolerance_hours: 150
        applies_during: "occupied"
        season: "summer"

      - id: "co2_cat3"
        name: "CO2 Concentration Cat III"
        metric: "co2"
        operator: "<="
        target_value: 1750  # 400 + 1350
        unit: "ppm"
        tolerance_percentage: 10
        applies_during: "occupied"

      - id: "humidity_cat3"
        name: "Relative Humidity Cat III"
        metric: "humidity"
        operator: "between"
        lower_bound: 20
        upper_bound: 70
        unit: "%"
        tolerance_percentage: 15
        applies_during: "occupied"

  # Category IV - Low expectation
  - category: "IV"
    rules:
      - id: "temp_heating_cat4"
        name: "Temperature Heating Season Cat IV"
        metric: "temperature"
        operator: "between"
        lower_bound: 17.0
        upper_bound: 27.0
        unit: "°C"
        tolerance_hours: 200
        applies_during: "occupied"
        season: "winter"

      - id: "temp_cooling_cat4"
        name: "Temperature Cooling Season Cat IV"
        metric: "temperature"
        operator: "between"
        lower_bound: 20.0
        upper_bound: 29.0
        unit: "°C"
        tolerance_hours: 200
        applies_during: "occupied"
        season: "summer"

      - id: "co2_cat4"
        name: "CO2 Concentration Cat IV"
        metric: "co2"
        operator: "<="
        target_value: 1750  # 400 + 1350
        unit: "ppm"
        tolerance_percentage: 15
        applies_during: "occupied"

      - id: "humidity_cat4"
        name: "Relative Humidity Cat IV"
        metric: "humidity"
        operator: "between"
        lower_bound: 15
        upper_bound: 80
        unit: "%"
        tolerance_percentage: 20
        applies_during: "occupied"

# Ventilation requirements per category (L/(s·person))
ventilation_rates:
  I: 10
  II: 7
  III: 4
  IV: 4

# Building emission factors (L/(s·m²))
building_emissions:
  very_low: 0.0
  low: 0.5
  non_low: 1.0

# Adaptive comfort settings
adaptive_comfort:
  enabled: true
  applicable_ventilation_types: ["natural", "mixed"]
  min_outdoor_temp: 10.0  # °C
  max_outdoor_temp: 30.0  # °C
  running_mean_alpha: 0.8
  temperature_deviations:
    I: 2.0
    II: 3.0
    III: 4.0
    IV: 5.0

# Outdoor CO2 baseline
outdoor_co2: 400.0  # ppm

# Analysis module
analysis_module: "standards.en16798-1.analysis:run"
